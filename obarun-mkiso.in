#!/bin/bash
# This script is under license BEER-WARE
# "THE BEER-WARE LICENSE" (Revision 42):
# <eric@obarun.org> wrote this file.  As long as you retain this notice you
# can do whatever you want with this stuff. If we meet some day, and you think
# this stuff is worth it, you can buy me a beer in return.   Eric Vidal



shopt -s extglob

##		Check is the functions file exits

if [[ -f /usr/lib/obarun/common_functions ]]; then
	source /usr/lib/obarun/common_functions
else
	echo "==>> Missing file : common_functions"
	exit	
fi

if [[ -f /usr/lib/obarun/mkiso_functions ]]; then
	source /usr/lib/obarun/mkiso_functions
else
	echo "==>> Missing file : mkiso_functions"
	exit	
fi

##		Clean before exit

trap "clean_install" EXIT ERR QUIT KILL STOP INT TERM 

##		Must be root user 

(( EUID == 0 )) || die " ${bred}You must be run this script with root privileges"

##		Let's go

##		Update package or not

main_update(){
	echo_display " Do you want to update obarun-mkiso package? [y|n]"

	reply_answer

	if (( ! "$rc" )); then
		unset rc
		pac_update "obarun-mkiso" "/var/lib/obarun/obarun-mkiso" "$git_addr" || die " Impossible to update"
		source /usr/lib/obarun/mkiso_functions
	else
		unset rc
		echo_retry " Some functionalities will cannot working properly without updating"
		echo_info " Press enter to continue"
		read enter
	fi
}

if [[ "$update" == "yes" ]]; then
	main_update
fi

main_menu




